<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sentiment Analyzer</title>

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700&display=swap"
    rel="stylesheet"
  />
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio"></script>
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

  <style>
    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      background: linear-gradient(135deg, #f7f3f0, #fdfaf8);
      margin: 0;
      padding: 0;
    }

    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: 0;
      background: transparent;
    }

    .main-content {
      position: relative;
      z-index: 10;
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center px-4 py-10 relative">

  <!-- Particle Background -->
  <div id="particles-js"></div>

  <!-- Main Content -->
  <main class="main-content max-w-xl w-full bg-white/90 backdrop-blur-md p-8 rounded-3xl shadow-2xl border border-[#ece2dc]">
    <!-- Header -->
    <div class="flex flex-col items-center justify-between gap-2 mb-6">
      <h1 class="text-4xl font-extrabold text-[#2e2a27] text-center">Sentiment Analyzer</h1>
      <p class="text-sm text-gray-500 text-center">Analyze your thoughts instantly</p>
    </div>

    <!-- User Info -->
    <div class="bg-[#f9f6f4] p-4 rounded-xl border border-[#e0d6cf] shadow mb-6">
      <p class="text-gray-700"><strong>Logged in as:</strong> {{ session['user'] }}</p>
      <div class="mt-2 flex justify-start gap-4 text-sm">
        <a href="{{ url_for('logout') }}" class="text-red-600 font-medium hover:underline">Logout</a>
        {% if session['user'] == admin_email %}
          <a href="{{ url_for('admin_dashboard') }}" class="text-blue-500 hover:underline">Admin Dashboard</a>
        {% endif %}
        <a href="{{ url_for('history') }}" class="text-emerald-600 font-medium hover:underline">View History</a>
      </div>
    </div>

    <!-- Form -->
    <form method="POST" action="/" class="space-y-4">
      <label for="text" class="block text-sm font-medium text-gray-700">Enter your text</label>
      <textarea
        id="text"
        name="text"
        required
        placeholder="How are you feeling today? Share your thoughts..."
        class="w-full p-4 rounded-xl bg-white border border-gray-300 shadow-sm text-gray-800 min-h-[160px] resize-none focus:outline-none focus:ring-2 focus:ring-[#e2cbbb] focus:border-transparent"
      ></textarea>

      <button
        type="submit"
        class="w-full h-12 rounded-full bg-[#e2cbbb] text-[#171412] font-bold hover:bg-[#d5b8a3] transition duration-200 shadow-md"
      >
        Analyze Sentiment
      </button>
    </form>
  </main>

  <!-- particles.js config -->
  <script>
    particlesJS("particles-js", {
      particles: {
        number: { value: 60 },
        color: { value: "#aaa" },
        shape: { type: "circle" },
        opacity: { value: 0.6 },
        size: { value: 3, random: true },
        line_linked: {
          enable: true,
          distance: 120,
          color: "#ccc",
          opacity: 0.4,
          width: 1
        },
        move: {
          enable: true,
          speed: 1.2,
          direction: "none",
          out_mode: "bounce"
        }
      },
      interactivity: {
        detect_on: "canvas",
        events: {
          onhover: { enable: true, mode: "repulse" },
          onclick: { enable: true, mode: "push" }
        },
        modes: {
          repulse: { distance: 100 },
          push: { particles_nb: 4 }
        }
      },
      retina_detect: true
    });
  </script>

</body>
</html>
